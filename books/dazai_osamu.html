<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="../layout.css" type="text/css">
    <link rel="stylesheet" href="../background1.css" type="text/css">
    <link rel="stylesheet" href="../menu_all.css" type="text/css">
    <meta name="viewport" content="initial-scale=1.0">
    <title>太宰治</title>
</head>

<body>
    <canvas id="canvas"></canvas>
    <section id="srap">
        &nbsp;
        <!--以下は明星中学・高等学校のロゴ兼リンク-->
        <a href="https://www.meisei.ac.jp/hs" target=“_blank” rel=“noopener”>
            <img src="../icon/logo_hs.svg" width="300">
        </a>
        &nbsp;
        <!--以下はタイトル-->
        <div class="title-wrapper">
            <div class="title">
                <div class="bounceInDown">
                    太宰治
                </div>
            </div>
        </div>
        <a href="book.html">
            <div class="btn">
                ☜戻る
            </div>
        </a>
        <br>
        <br>
        <div class="header">
            新字新仮名
        </div>
        <div class="text">
            <a href="dazai_osamu/hashire_merosu1.html" target="_blank">
                <img src="dazai_osamu/hashire_merosu.png" height="80">
            </a>
        </div>
        <!--以下はフッター-->
        <div class="footer ">
            ©2019-2020 Kota Misu
        </div>
    </section>
</body>
<script>
    //背景(canvas)
    var livePatern = {
        canvas: null,
        context: null,
        cols: 0,
        rows: 0,
        colors: [252, 251, 249, 248, 241, 240],
        triangleColors: [],
        destColors: [],

        init: function() {
            this.canvas = document.getElementById('canvas');
            this.context = this.canvas.getContext('2d');
            this.cols = Math.floor(document.body.clientWidth / 24);
            this.rows = Math.floor(document.body.clientHeight / 24) + 1;

            this.canvas.width = document.body.clientWidth;
            this.canvas.height = document.body.clientHeight;

            this.drawBackground();
            this.animate();
        },

        drawTriangle: function(x, y, color, inverted) {
            inverted = inverted == undefined ? false : inverted;

            this.context.beginPath();
            this.context.moveTo(x, y);
            this.context.lineTo(inverted ? x - 22 : x + 22, y + 11);
            this.context.lineTo(x, y + 22);
            this.context.fillStyle = "rgb( " + color + ", " + color + ", " + color + ") ";
            this.context.fill();
            this.context.closePath();
        },

        getColor: function() {
            return this.colors[(Math.floor(Math.random() * 6))];
        },

        drawBackground: function() {
            var eq = null;
            var x = this.cols;
            var destY = 0;
            var color, y;

            while (x--) {
                eq = x % 2;
                y = this.rows;

                while (y--) {
                    destY = Math.round((y - 0.5) * 24);

                    this.drawTriangle(x * 24 + 2, eq == 1 ? destY : y * 24, this.getColor());
                    this.drawTriangle(x * 24, eq == 1 ? destY : y * 24, this.getColor(), true);
                }
            }
        },

        animate: function() {
            var me = this;

            var x = Math.floor(Math.random() * this.cols);
            var y = Math.floor(Math.random() * this.rows);
            var eq = x % 2;

            if (eq == 1) {
                me.drawTriangle(x * 24, Math.round((y - 0.5) * 24), this.getColor(), true);
            } else {
                me.drawTriangle(x * 24 + 2, y * 24, this.getColor());
            }

            setTimeout(function() {
                me.animate.call(me);
            }, 10);
        },
    };

    ! function() {
        livePatern.init();
    }()
</script>


</html>